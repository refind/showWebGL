(function(g){function k(a){a.startMove=a.startMove?a.startMove:{startX:null,startY:null,timestamp:null};var d=(new Date).getTime(),c,f;if(a.touches){f=[{lastX:a.deltaX,lastY:a.deltaY,moved:null,startX:a.screenX-a.startMove.screenX,startY:a.screenY-a.startMove.screenY}];c={vector:a.vector||null,orientation:window.orientation||null,lastX:0<f[0].lastX?1:0>f[0].lastX?-1:0,lastY:0<f[0].lastY?1:0>f[0].lastY?-1:0,startX:0<f[0].startX?1:0>f[0].startX?-1:0,startY:0<f[0].startY?1:0>f[0].startY?-1:0};f[0].moved=Math.sqrt(Math.pow(Math.abs(f[0].startX),2)+Math.pow(Math.abs(f[0].startY),2));var b=f[0].lastX,e=f[0].lastY;direction=null;0==b||-2>=e/b||2<=e/b?0<e?direction="down":0>e&&(direction="up"):0==e||-2>=b/e||2<=b/e?0<b?direction="right":0>b&&(direction="left"):.5<e/b&&2>e/b?0<e?direction="rightdown":0>e&&(direction="leftup"):-2<e/b&&-.5>e/b&&(0<e?direction="leftdown":0>e&&(direction="rightup"));c.name=direction}return{type:a.type||null,originalEvent:a.event||null,delta:f||null,direction:c||{orientation:window.orientation||null,vector:a.vector||null},duration:a.duration?a.duration:a.startMove.timestamp?d-a.timestamp:null,rotation:a.rotation||null,scale:a.scale||null,description:a.description||[a.type,":",a.touches,":",0!=f[0].lastX?0<f[0].lastX?"right":"left":"steady",":",0!=f[0].lastY?0<f[0].lastY?"down":"up":"steady"].join("")}}function r(a){g(window).triggerHandler("orientationchange",{direction:{orientation:window.orientation},description:["orientationchange:",["landscape:clockwise:","portrait:default:","landscape:counterclockwise:","portrait:upsidedown:"][window.orientation/90+1],window.orientation].join("")})}function t(a){var d,c=jQuery(window),f=c.data("ojQueryGestures"),b=g.jGestures.defaults.thresholdShake,e=f.oDeviceMotionLastDevicePosition||{accelerationIncludingGravity:{x:0,y:0,z:0},shake:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeleftright:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakefrontback:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeupdown:{eventCount:0,intervalsPassed:0,intervalsFreeze:0}},e={accelerationIncludingGravity:{x:a.accelerationIncludingGravity.x,y:a.accelerationIncludingGravity.y,z:a.accelerationIncludingGravity.z},shake:{eventCount:e.shake.eventCount,intervalsPassed:e.shake.intervalsPassed,intervalsFreeze:e.shake.intervalsFreeze},shakeleftright:{eventCount:e.shakeleftright.eventCount,intervalsPassed:e.shakeleftright.intervalsPassed,intervalsFreeze:e.shakeleftright.intervalsFreeze},shakefrontback:{eventCount:e.shakefrontback.eventCount,intervalsPassed:e.shakefrontback.intervalsPassed,intervalsFreeze:e.shakefrontback.intervalsFreeze},shakeupdown:{eventCount:e.shakeupdown.eventCount,intervalsPassed:e.shakeupdown.intervalsPassed,intervalsFreeze:e.shakeupdown.intervalsFreeze}},h;for(d in f){switch(d){case "shake":case "shakeleftright":case "shakefrontback":case "shakeupdown":h=[];h.push(d);if(++e[d].intervalsFreeze>b.freezeShakes&&e[d].intervalsFreeze<2*b.freezeShakes)break;e[d].intervalsFreeze=0;e[d].intervalsPassed++;"shake"!==d&&"shakeleftright"!==d||!(e.accelerationIncludingGravity.x>b.leftright.sensitivity||e.accelerationIncludingGravity.x<-1*b.leftright.sensitivity)||(h.push("leftright"),h.push("x-axis"));"shake"!==d&&"shakefrontback"!==d||!(e.accelerationIncludingGravity.y>b.frontback.sensitivity||e.accelerationIncludingGravity.y<-1*b.frontback.sensitivity)||(h.push("frontback"),h.push("y-axis"));"shake"!==d&&"shakeupdown"!==d||!(e.accelerationIncludingGravity.z+9.81>b.updown.sensitivity||e.accelerationIncludingGravity.z+9.81<-1*b.updown.sensitivity)||(h.push("updown"),h.push("z-axis"));1<h.length&&(++e[d].eventCount==b.requiredShakes&&e[d].intervalsPassed<b.freezeShakes?(c.triggerHandler(d,k({type:d,description:h.join(":"),event:a,duration:5*e[d].intervalsPassed})),e[d].eventCount=0,e[d].intervalsPassed=0,e[d].intervalsFreeze=b.freezeShakes+1):e[d].eventCount==b.requiredShakes&&e[d].intervalsPassed>b.freezeShakes&&(e[d].eventCount=0,e[d].intervalsPassed=0))}h={};h.oDeviceMotionLastDevicePosition=e;c.data("ojQueryGestures",g.extend(!0,f,h))}}function l(a){var d=jQuery(a.currentTarget);d.triggerHandler(g.jGestures.events.touchstart,a);g.hasGestures?(a.currentTarget.addEventListener("touchmove",m,!1),a.currentTarget.addEventListener("touchend",n,!1)):(d.bind("mousemove",m),d.bind("mouseup",n));var c=d.data("ojQueryGestures");a=a.touches?a.touches[0]:a;var f={};f.oLastSwipemove={screenX:a.screenX,screenY:a.screenY,timestamp:(new Date).getTime()};f.oStartTouch={screenX:a.screenX,screenY:a.screenY,timestamp:(new Date).getTime()};d.data("ojQueryGestures",g.extend(!0,c,f))}function m(a){var d=jQuery(a.currentTarget);a.preventDefault();var c=d.data("ojQueryGestures"),f=!!a.touches,b=f?a.changedTouches[0].screenX:a.screenX,e=f?a.changedTouches[0].screenY:a.screenY,h=c.oLastSwipemove,m=b-h.screenX,n=e-h.screenY;c.oLastSwipemove&&(f=k({type:"swipemove",touches:f?a.touches.length:"1",screenY:e,screenX:b,deltaY:n,deltaX:m,startMove:h,event:a,timestamp:h.timestamp}),d.triggerHandler(f.type,f));f={};a=a.touches?a.touches[0]:a;f.oLastSwipemove={screenX:a.screenX,screenY:a.screenY,timestamp:(new Date).getTime()};d.data("ojQueryGestures",g.extend(!0,c,f))}function n(a){var d=jQuery(a.currentTarget),c=!!a.changedTouches,f=c?a.changedTouches.length:"1",b=c?a.changedTouches[0].screenX:a.screenX,e=c?a.changedTouches[0].screenY:a.screenY;d.triggerHandler(g.jGestures.events.touchendStart,a);g.hasGestures?(a.currentTarget.removeEventListener("touchmove",m,!1),a.currentTarget.removeEventListener("touchend",n,!1)):(d.unbind("mousemove",m),d.unbind("mouseup",n));var h=d.data("ojQueryGestures"),l=Math.abs(h.oStartTouch.screenX-b)>g.jGestures.defaults.thresholdMove||Math.abs(h.oStartTouch.screenY-e)>g.jGestures.defaults.thresholdMove?!0:!1,q=Math.abs(h.oStartTouch.screenX-b)>g.jGestures.defaults.thresholdSwipe||Math.abs(h.oStartTouch.screenY-e)>g.jGestures.defaults.thresholdSwipe?!0:!1,p,u,r,t,v=["zero","one","two","three","four"];for(p in h){u=h.oStartTouch;b=c?a.changedTouches[0].screenX:a.screenX;e=c?a.changedTouches[0].screenY:a.screenY;r=b-u.screenX;t=e-u.screenY;b=k({type:"swipe",touches:f,screenY:e,screenX:b,deltaY:t,deltaX:r,startMove:u,event:a,timestamp:u.timestamp});switch(p){case "swipeone":case "swipetwo":case "swipethree":case "swipefour":case "swipeup":case "swiperightup":case "swiperight":case "swiperightdown":case "swipedown":case "swipeleftdown":case "swipeleft":case "swipeleftup":if(!1===c&&1<=f&&!1===l)break;if(!1===c||1<=f&&!0===l&&!0===q){b.type=["swipe",v[f]].join("");if(b.type==p){d.triggerHandler(b.type,b);break}null!==b.direction.name&&(b.type="swipe"+b.direction.name,b.type==p&&d.triggerHandler(b.type,b))}break;case "tapone":case "taptwo":case "tapthree":case "tapfour":!0!==l&&v[f]==p.slice(3)&&(b.description=["tap",v[f]].join(""),b.type=["tap",v[f]].join(""),b.type==p&&d.triggerHandler(b.type,b))}b={};d.data("ojQueryGestures",g.extend(!0,h,b));d.data("ojQueryGestures",g.extend(!0,h,b))}d.triggerHandler(g.jGestures.events.touchendProcessed,a);d.triggerHandler("EmpUpEnd",a)}function q(a){var d=jQuery(a.currentTarget);d.triggerHandler(g.jGestures.events.gesturestart,a);a=d.data("ojQueryGestures");var c={};c.oStartTouch={timestamp:(new Date).getTime()};d.data("ojQueryGestures",g.extend(!0,a,c))}function w(a){var d=jQuery(a.currentTarget),c,f,b=d.data("ojQueryGestures"),e;for(e in b)switch(e){case "pinch":c=a.scale;if(1>c&&c%1<1-g.jGestures.defaults.thresholdPinchclose||1<c&&c%1>g.jGestures.defaults.thresholdPinchopen)f=1>c?-1:1,c=k({type:"pinch",scale:c,touches:null,startMove:b.oStartTouch,event:a,timestamp:b.oStartTouch.timestamp,vector:f,description:["pinch:",f,":",1>c?"close":"open"].join("")}),d.triggerHandler(c.type,c);break;case "rotate":if(c=a.rotation,1>c&&-1*c>g.jGestures.defaults.thresholdRotateccw||1<c&&c>g.jGestures.defaults.thresholdRotatecw)f=1>c?-1:1,c=k({type:"rotate",rotation:c,touches:null,startMove:b.oStartTouch,event:a,timestamp:b.oStartTouch.timestamp,vector:f,description:["rotate:",f,":",1>c?"counterclockwise":"clockwise"].join("")}),d.triggerHandler(c.type,c)}}function x(a){var d=jQuery(a.currentTarget);d.triggerHandler(g.jGestures.events.gestureendStart,a);var c,f=d.data("ojQueryGestures"),b;for(b in f)switch(b){case "pinchclose":c=a.scale;1>c&&c%1<1-g.jGestures.defaults.thresholdPinchclose&&d.triggerHandler("pinchclose",k({type:"pinchclose",scale:c,vector:-1,touches:null,startMove:f.oStartTouch,event:a,timestamp:f.oStartTouch.timestamp,description:"pinch:-1:close"}));break;case "pinchopen":c=a.scale;1<c&&c%1>g.jGestures.defaults.thresholdPinchopen&&d.triggerHandler("pinchopen",k({type:"pinchopen",scale:c,vector:1,touches:null,startMove:f.oStartTouch,event:a,timestamp:f.oStartTouch.timestamp,description:"pinch:+1:open"}));break;case "rotatecw":c=a.rotation;1<c&&c>g.jGestures.defaults.thresholdRotatecw&&d.triggerHandler("rotatecw",k({type:"rotatecw",rotation:c,vector:1,touches:null,startMove:f.oStartTouch,event:a,timestamp:f.oStartTouch.timestamp,description:"rotate:+1:clockwise"}));break;case "rotateccw":c=a.rotation,1>c&&-1*c>g.jGestures.defaults.thresholdRotateccw&&d.triggerHandler("rotateccw",k({type:"rotateccw",rotation:c,vector:-1,touches:null,startMove:f.oStartTouch,event:a,timestamp:f.oStartTouch.timestamp,description:"rotate:-1:counterclockwise"}))}d.triggerHandler(g.jGestures.events.gestureendProcessed,a)}g.jGestures={};g.jGestures.defaults={};g.jGestures.defaults.thresholdShake={requiredShakes:10,freezeShakes:100,frontback:{sensitivity:10},leftright:{sensitivity:10},updown:{sensitivity:10}};g.jGestures.defaults.thresholdPinchopen=.05;g.jGestures.defaults.thresholdPinchmove=.05;g.jGestures.defaults.thresholdPinch=.05;g.jGestures.defaults.thresholdPinchclose=.05;g.jGestures.defaults.thresholdRotatecw=5;g.jGestures.defaults.thresholdRotateccw=5;g.jGestures.defaults.thresholdMove=20;g.jGestures.defaults.thresholdSwipe=100;g.jGestures.data={};g.jGestures.data.capableDevicesInUserAgentString=["iPad","iPhone","iPod","Mobile Safari"];g.jGestures.data.hasGestures=function(){var a;for(a=0;a<g.jGestures.data.capableDevicesInUserAgentString.length;a++)if(-1!==navigator.userAgent.indexOf(g.jGestures.data.capableDevicesInUserAgentString[a]))return!0;return!1}();g.hasGestures=g.jGestures.data.hasGestures;g.jGestures.events={touchstart:"jGestures.touchstart",touchendStart:"jGestures.touchend;start",touchendProcessed:"jGestures.touchend;processed",gesturestart:"jGestures.gesturestart",gestureendStart:"jGestures.gestureend;start",gestureendProcessed:"jGestures.gestureend;processed"};jQuery.each({orientationchange_orientationchange01:"orientationchange",gestureend_pinchopen01:"pinchopen",gestureend_pinchclose01:"pinchclose",gestureend_rotatecw01:"rotatecw",gestureend_rotateccw01:"rotateccw",gesturechange_pinch01:"pinch",gesturechange_rotate01:"rotate",touchstart_swipe13:"swipemove",touchstart_swipe01:"swipeone",touchstart_swipe02:"swipetwo",touchstart_swipe03:"swipethree",touchstart_swipe04:"swipefour",touchstart_swipe05:"swipeup",touchstart_swipe06:"swiperightup",touchstart_swipe07:"swiperight",touchstart_swipe08:"swiperightdown",touchstart_swipe09:"swipedown",touchstart_swipe10:"swipeleftdown",touchstart_swipe11:"swipeleft",touchstart_swipe12:"swipeleftup",touchstart_tap01:"tapone",touchstart_tap02:"taptwo",touchstart_tap03:"tapthree",touchstart_tap04:"tapfour",devicemotion_shake01:"shake",devicemotion_shake02:"shakefrontback",devicemotion_shake03:"shakeleftright",devicemotion_shake04:"shakeupdown"},function(a,d){jQuery.event.special[d]={setup:function(){var c=a.split("_"),f=c[0],c=c[1].slice(0,c[1].length-2),b=jQuery(this),e,d;if(!b.data("ojQueryGestures")||!b.data("ojQueryGestures")[f])if(e=b.data("ojQueryGestures")||{},d={},d[f]=!0,g.extend(!0,e,d),b.data("ojQueryGestures",e),g.hasGestures)switch(c){case "orientationchange":b.get(0).addEventListener("orientationchange",r,!1);break;case "shake":case "shakefrontback":case "shakeleftright":case "shakeupdown":case "tilt":b.get(0).addEventListener("devicemotion",t,!1);break;case "tap":case "swipe":case "swipeup":case "swiperightup":case "swiperight":case "swiperightdown":case "swipedown":case "swipeleftdown":case "swipeleft":b.get(0).addEventListener("touchstart",l,!1);break;case "pinchopen":case "pinchclose":case "rotatecw":case "rotateccw":b.get(0).addEventListener("gesturestart",q,!1);b.get(0).addEventListener("gestureend",x,!1);break;case "pinch":case "rotate":b.get(0).addEventListener("gesturestart",q,!1),b.get(0).addEventListener("gesturechange",w,!1)}else switch(c){case "tap":case "swipe":b.bind("mousedown",l)}return!1},add:function(a){jQuery(this).data("ojQueryGestures")[a.type]={originalType:a.type};return!1},remove:function(a){var d=jQuery(this),b=d.data("ojQueryGestures");b[a.type]=!1;d.data("ojQueryGestures",b);return!1},teardown:function(){var c=a.split("_"),d=c[0],c=c[1].slice(0,c[1].length-2),b=jQuery(this),e,h;if(!b.data("ojQueryGestures")||!b.data("ojQueryGestures")[d])if(e=b.data("ojQueryGestures")||{},h={},h[d]=!1,g.extend(!0,e,h),b.data("ojQueryGestures",e),g.hasGestures)switch(c){case "orientationchange":b.get(0).removeEventListener("orientationchange",r,!1);break;case "shake":case "shakefrontback":case "shakeleftright":case "shakeupdown":case "tilt":b.get(0).removeEventListener("devicemotion",t,!1);break;case "tap":case "swipe":case "swipeup":case "swiperightup":case "swiperight":case "swiperightdown":case "swipedown":case "swipeleftdown":case "swipeleft":case "swipeleftup":b.get(0).removeEventListener("touchstart",l,!1);b.get(0).removeEventListener("touchmove",m,!1);b.get(0).removeEventListener("touchend",n,!1);break;case "pinchopen":case "pinchclose":case "rotatecw":case "rotateccw":b.get(0).removeEventListener("gesturestart",q,!1);b.get(0).removeEventListener("gestureend",x,!1);break;case "pinch":case "rotate":b.get(0).removeEventListener("gesturestart",q,!1),b.get(0).removeEventListener("gesturechange",w,!1)}else switch(c){case "tap":case "swipe":b.unbind("mousedown",l),b.unbind("mousemove",m),b.unbind("mouseup",n)}return!1}}})})(jQuery);