(function(f,h,k,l){function g(a,b,c,d){var e={duration:1,animation:null,iterate:2,delay:0,timing:"linear",keep:!1,fillmode:"forwards"};this.prefixes=["","-moz-","-o-animation-","-webkit-","-ms-"];this.element=f(a);this.bare=a;this.queue=[];this.listening=!1;a="function"==typeof c?c:d;switch(b){case "blur":e={amount:3,duration:.5,focusAfter:null};this.options=f.extend(e,c);this._blur(a);break;case "focus":this._focus();break;case "rotate":e={degrees:15,duration:.5};this.options=f.extend(e,c);this._rotate(a);break;case "cleanse":this.cleanse();break;default:this.options=f.extend(e,b),this.init(a)}}g.prototype={init:function(a){"[object Array]"===Object.prototype.toString.call(this.options.animation)?f.merge(this.queue,this.options.animation):this.queue.push(this.options.animation);this.cleanse();this.animate(a)},animate:function(a){this.element.addClass("animated");this.element.addClass(this.queue[0]);this.element.data("animo",this.queue[0]);for(var b=this.prefixes.length;b--;)this.element.css(this.prefixes[b]+"animation-duration",this.options.duration+"s"),this.element.css(this.prefixes[b]+"animation-delay",this.options.delay+"s"),this.element.css(this.prefixes[b]+"animation-iteration-count",this.options.iterate),this.element.css(this.prefixes[b]+"animation-timing-function",this.options.timing),this.element.css(this.prefixes[b]+"animation-fill-mode",this.options.fillmode);var c=this,b=a;1<c.queue.length&&(b=null);this._end("AnimationEnd",function(){c.element.hasClass(c.queue[0])&&(c.options.keep||c.cleanse(),c.queue.shift(),c.queue.length&&c.animate(a))},b)},cleanse:function(){this.element.removeClass("animated");this.element.removeClass(this.queue[0]);this.element.removeClass(this.element.data("animo"));for(var a=this.prefixes.length;a--;)this.element.css(this.prefixes[a]+"animation-duration",""),this.element.css(this.prefixes[a]+"animation-delay",""),this.element.css(this.prefixes[a]+"animation-iteration-count",""),this.element.css(this.prefixes[a]+"animation-timing-function",""),this.element.css(this.prefixes[a]+"animation-fill-mode",""),this.element.css(this.prefixes[a]+"transition",""),this.element.css(this.prefixes[a]+"transform",""),this.element.css(this.prefixes[a]+"filter","")},_blur:function(a){if(this.element.is("img")){var b="svg_"+(16777216*(1+Math.random())|0).toString(16).substring(1),c="filter_"+(16777216*(1+Math.random())|0).toString(16).substring(1);f("body").append('\x3csvg version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" id\x3d"'+b+'" style\x3d"height:0;position:absolute;top:-1000px;"\x3e\x3cfilter id\x3d"'+c+'"\x3e\x3cfeGaussianBlur stdDeviation\x3d"'+this.options.amount+'" /\x3e\x3c/filter\x3e\x3c/svg\x3e');for(var d=this.prefixes.length;d--;)this.element.css(this.prefixes[d]+"filter","blur("+this.options.amount+"px)"),this.element.css(this.prefixes[d]+"transition",this.options.duration+"s all linear");this.element.css("filter","url(#"+c+")");this.element.data("svgid",b)}else{b=this.element.css("color");for(d=this.prefixes.length;d--;)this.element.css(this.prefixes[d]+"transition","all "+this.options.duration+"s linear");this.element.css("text-shadow","0 0 "+this.options.amount+"px "+b);this.element.css("color","transparent")}this._end("TransitionEnd",null,a);var e=this;if(this.options.focusAfter)var g=h.setTimeout(function(){e._focus();g=h.clearTimeout(g)},1E3*this.options.focusAfter)},_focus:function(){var a=this.prefixes.length;if(this.element.is("img")){for(;a--;)this.element.css(this.prefixes[a]+"filter",""),this.element.css(this.prefixes[a]+"transition","");f("#"+this.element.data("svgid")).remove()}else{for(;a--;)this.element.css(this.prefixes[a]+"transition","");this.element.css("text-shadow","");this.element.css("color","")}},_rotate:function(a){for(var b=this.prefixes.length;b--;)this.element.css(this.prefixes[b]+"transition","all "+this.options.duration+"s linear"),this.element.css(this.prefixes[b]+"transform","rotate("+this.options.degrees+"deg)");this._end("TransitionEnd",null,a)},_end:function(a,b,c){var d=this,e=a.toLowerCase()+" webkit"+a+" o"+a+" MS"+a;this.element.bind(e,function(){d.element.unbind(e);"function"==typeof b&&b();"function"==typeof c&&c(d)})}};f.fn.animo=function(a,b,c){return this.each(function(){new g(this,a,b,c)})}})(jQuery,window,document);