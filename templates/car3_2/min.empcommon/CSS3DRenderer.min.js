THREE.CSS3DObject=function(h){THREE.Object3D.call(this);this.element=h;this.element.style.position="absolute";this.addEventListener("removed",function(h){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})};THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype);THREE.CSS3DObject.prototype.constructor=THREE.CSS3DObject;THREE.CSS3DSprite=function(h){THREE.CSS3DObject.call(this,h)};THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype);THREE.CSS3DSprite.prototype.constructor=THREE.CSS3DSprite;THREE.CSS3DRenderer=function(){console.log("THREE.CSS3DRenderer",THREE.REVISION);var h,k,l,m,e=new THREE.Matrix4,n=0,p="",q={},f=document.createElement("div");f.style.overflow="hidden";f.style.WebkitTransformStyle="preserve-3d";f.style.MozTransformStyle="preserve-3d";f.style.oTransformStyle="preserve-3d";f.style.transformStyle="preserve-3d";this.domElement=f;var g=document.createElement("div");g.style.WebkitTransformStyle="preserve-3d";g.style.MozTransformStyle="preserve-3d";g.style.oTransformStyle="preserve-3d";g.style.transformStyle="preserve-3d";f.appendChild(g);this.setClearColor=function(){};this.getSize=function(){return{width:h,height:k}};this.setSize=function(a,b){h=a;k=b;l=h/2;m=k/2;f.style.width=a+"px";f.style.height=b+"px";g.style.width=a+"px";g.style.height=b+"px"};var b=function(a){return Math.abs(a)<Number.EPSILON?0:a},r=function(a){a=a.elements;return"translate3d(-50%,-50%,0) matrix3d("+b(a[0])+","+b(a[1])+","+b(a[2])+","+b(a[3])+","+b(-a[4])+","+b(-a[5])+","+b(-a[6])+","+b(-a[7])+","+b(a[8])+","+b(a[9])+","+b(a[10])+","+b(a[11])+","+b(a[12])+","+b(a[13])+","+b(a[14])+","+b(a[15])+")"},t=function(a,b){if(a instanceof THREE.CSS3DObject){var d;a instanceof THREE.CSS3DSprite?(e.copy(b.matrixWorldInverse),e.transpose(),e.copyPosition(a.matrixWorld),e.scale(a.scale),e.elements[3]=0,e.elements[7]=0,e.elements[11]=0,e.elements[15]=1,d=r(e)):d=r(a.matrixWorld);var c=a.element,f=q[a.id];if(void 0===f||f!==d)c.style.WebkitTransform=d,c.style.MozTransform=d,c.style.oTransform=d,c.style.transform=d,q[a.id]=d;c.parentNode!==g&&g.appendChild(c)}d=0;for(c=a.children.length;d<c;d++)t(a.children[d],b)};this.render=function(a,e){var d=.5/Math.tan(THREE.Math.degToRad(.5*e.fov))*k;n!==d&&(f.style.WebkitPerspective=d+"px",f.style.MozPerspective=d+"px",f.style.oPerspective=d+"px",f.style.perspective=d+"px",n=d);a.updateMatrixWorld();null===e.parent&&e.updateMatrixWorld();e.matrixWorldInverse.getInverse(e.matrixWorld);var c;c=e.matrixWorldInverse.elements;c="matrix3d("+b(c[0])+","+b(-c[1])+","+b(c[2])+","+b(c[3])+","+b(c[4])+","+b(-c[5])+","+b(c[6])+","+b(c[7])+","+b(c[8])+","+b(-c[9])+","+b(c[10])+","+b(c[11])+","+b(c[12])+","+b(-c[13])+","+b(c[14])+","+b(c[15])+")";d="translate3d(0,0,"+d+"px)"+c+" translate3d("+l+"px,"+m+"px, 0)";p!==d&&(g.style.WebkitTransform=d,g.style.MozTransform=d,g.style.oTransform=d,p=g.style.transform=d);t(a,e)}};